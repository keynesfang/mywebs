<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name='viewport' content='width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no'>
    <title>在学习中成长</title>
    <link rel='stylesheet' type='text/css' href='lib/bootstrap-4.0.0/css/bootstrap.min.css'>
    <link rel='stylesheet' type='text/css' href='/lib/font-awesome-4.7.0/css/font-awesome.min.css'>
    <script src='/lib/jquery-3.2.1.min.js'></script>
    <script src='/lib/bootstrap-4.0.0/js/bootstrap.min.js'></script>
    <style>
        #video_control_bar {
            padding-top: 3px;
            background-color: rgba(255, 0, 0, 0.3);
        }

        .abs {
            position: absolute;
        }

        .control_btn {
            width: 40px;
        }

        #progress {
            height: 5px;
            border-radius: 0;
            bottom: 0;
        }
    </style>
    <script>
        var control_name_list = ["play", "fast", "slow", "sound", "speed", "full_screen", "subscription", "expand"];
        var control_list = {};
        var bar_width = 0;
        var control_btn_width = 40;
        var video = undefined;
        $(function () {
            video = document.getElementById("video");
            set_video_size();
            control_init();
        });

        function control_init() {
            var control_count = control_name_list.length;
            var control_total_width = control_btn_width * control_count;
            var blank_width = parseInt((bar_width - control_total_width) / (control_count + 1));
            var current_let_pos = 0;
            $.each(control_name_list, function (idx, name) {
                control_list[name] = $("#" + name);
                control_list[name].css("left", current_let_pos);
                control_list[name].css("margin-left", blank_width);
                current_let_pos += 40 + blank_width;
            });
        }

        function set_video_size() {
            var bar = $("#video_control_bar");
            bar_width = bar.width();
            var bar_left_pos = bar.offset().left;
            bar.css("left", bar_left_pos - bar_width / 2);
        }

        var video_control = {
            play: function (self) {
                video_control.exchange_icon(self, "fa-play", "fa-pause");
                video.play();
            },
            pause: function (self) {
                video_control.exchange_icon(self, "fa-pause", "fa-play");
                video.pause();
            },
            exchange_icon: function (self, before, after) {
                $(self).children("i").removeClass(before);
                $(self).children("i").addClass(after);
            },
            toggle_click: function (self, class_name, func1, func2) {
                if ($(self).children("i").hasClass(class_name)) {
                    func1(self);
                } else {
                    func2(self);
                }
            }
        }
    </script>
</head>
<body>
<div id="video_container" class="w-100 text-center" style="position: relative;">
    <video id="video" class="w-100" style="max-width: 600px;">
        <source src="/function/english/video/resources/1.mp4" type="video/mp4">
        <track label="English" kind="subtitles" srclang="en" src="/function/english/video/resources/1_eng.vtt" default>
        <track label="Chinese" kind="subtitles" srclang="cn" src="/function/english/video/resources/1_chn.vtt">
    </video>
    <div id="video_control_bar" class="w-100 abs" style="bottom: 6px; left: 50%; height: 50px; max-width: 600px;">
        <div id="video_controls">
            <div id="progress" class="abs progress w-100">
                <div class="progress-bar progress-bar-striped progress-bar-animated" role="progressbar"
                     aria-valuenow="75" aria-valuemin="0" aria-valuemax="100" style="width: 75%"></div>
            </div>
            <button id="play" class="abs btn btn-outline-light control_btn" onclick="video_control.toggle_click(this, 'fa-play', video_control.play, video_control.pause);"><i class="fa fa-play"></i></button>
            <button id="fast" class="abs btn btn-outline-light control_btn"><i class="fa fa-backward"></i></button>
            <button id="slow" class="abs btn btn-outline-light control_btn"><i class="fa fa-forward"></i></button>
            <button id="sound" class="abs btn btn-outline-light control_btn"><i class="fa fa-volume-up"></i></button>
            <button id="speed" class="abs btn btn-outline-light control_btn"><i class="fa fa-flash"></i></button>
            <button id="full_screen" class="abs btn btn-outline-light control_btn"><i class="fa fa-expand"></i>
            </button>
            <button id="subscription" class="abs btn btn-outline-light control_btn"><i class="fa fa-cc"></i></button>
            <button id="expand" class="abs btn btn-outline-light control_btn"><i class="fa fa-arrows-h"></i></button>
        </div>
    </div>
</div>
</body>
</html>